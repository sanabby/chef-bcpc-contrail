#!/bin/sh
################################################
#
#              Generated by Chef
#
################################################

<% if @servers.include?(node) -%>

if [ "$1" = "discovery" ]; then
    echo
    echo "################################"
    echo "# CONTRAIL DISCOVERY SERVICE"
    service contrail-discovery restart
    sleep 10
fi

echo
echo "################################"
echo "# CONTRAIL HEAD NODE SERVICES"
for i in ifmap-server \
         contrail-analytics-api \
         contrail-collector \
         contrail-query-engine \
         contrail-svc-monitor \
         contrail-api \
         contrail-control \
         contrail-dns \
         contrail-named \
         contrail-schema \
         contrail-webui-webserver \
         contrail-webui-jobserver
do
    service $i restart
done
<% end -%>

echo
echo "################################"
echo "# CONTRAIL WORK NODE SERVICES"
for i in contrail-vrouter-agent
do
    service $i restart
done
